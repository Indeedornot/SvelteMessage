generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "sqlite"
    url      = "file:dev.db?connection_limit=1"
}

model User {
    id     Int     @id @default(autoincrement())
    name   String
    avatar String
    status String
    online Boolean @default(false)

    messages Message[]

    channels      Channel[]
    lastChannelId Int?

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
}

model Message {
    id   Int    @id @default(autoincrement())
    text String

    sender   User @relation(fields: [senderId], references: [id])
    senderId Int

    channel   Channel @relation(fields: [channelId], references: [id])
    channelId Int

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
}

model Channel {
    id     Int    @id @default(autoincrement())
    name   String
    avatar String

    messages Message[]

    users User[]

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
}
